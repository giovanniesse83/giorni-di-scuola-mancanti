<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Scuola</title>
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/svgs/solid/calendar-check.svg">
    <style>
        :root { --primary: #007AFF; --bg: #ffffff; --text: #1d1d1f; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: var(--bg); color: var(--text); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 100vh; margin: 0; text-align: center; overflow: hidden;
        }
        .container { padding: 20px; animation: fadeIn 0.8s ease-out; }
        h1 { font-size: 1.1rem; font-weight: 400; color: #86868b; margin-bottom: 0; text-transform: lowercase; }
        .days { font-size: 8.5rem; font-weight: 900; line-height: 1; margin: 5px 0; transition: color 1s; }
        .subtitle { font-size: 1.4rem; font-weight: 600; margin-bottom: 15px; }
        .quote { font-size: 1.1rem; color: #555; margin-bottom: 30px; min-height: 1.6rem; font-weight: 400; }
        .weeks { font-size: 1rem; color: #86868b; border-top: 1px solid #eee; padding-top: 20px; }
        strong { color: #333; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="label-top">giorni di scuola mancanti</h1>
        <p id="days-count" class="days">0</p>
        <p id="label-sub" class="subtitle">giorni effettivi</p>
        <p id="motivational-quote" class="quote"></p>
        
        <div id="weeks-info" class="weeks"></div>
    </div>

    <script>
        function calcola() {
            const oggi = new Date();
            oggi.setHours(0, 0, 0, 0);
            
            const mese = oggi.getMonth(); // 0=Gen, 5=Giu, 7=Ago
            const giornoMese = oggi.getDate();
            const giornoSettimanaOggi = oggi.getDay(); // 0=Dom, 6=Sab

            // 1. Controllo Vacanze Estive (dal 9 giugno al 31 agosto)
            if ((mese === 5 && giornoMese > 8) || mese === 6 || mese === 7) {
                mostraSchermataSpeciale("relax totale", "ðŸ˜Ž", "goditi le vacanze!", "Ã¨ ancora presto per pensare alla scuola.", "ci rivediamo a settembre!");
                return;
            }

            const dataFine = new Date(2026, 5, 8); // 8 Giugno 2026
            const vacanze = [
                "2026-04-02", "2026-04-03", "2026-04-04", "2026-04-05", "2026-04-06", "2026-04-07",
                "2026-05-01", "2026-06-01", "2026-06-02"
            ];

            const oggiString = oggi.toISOString().split('T')[0];
            const isWeekendOggi = (giornoSettimanaOggi === 0 || giornoSettimanaOggi === 6);
            const isVacanzaOggi = vacanze.includes(oggiString);

            // Logica di calcolo giorni rimanenti
            let corrente = new Date(oggi);
            let giorniLavorativi = 0;

            while (corrente < dataFine) {
                corrente.setDate(corrente.getDate() + 1);
                const d = corrente.getDay();
                const s = corrente.toISOString().split('T')[0];

                if (d !== 0 && d !== 6 && !vacanze.includes(s)) {
                    giorniLavorativi++;
                }
            }

            // 2. Gestione Messaggio "Oggi niente scuola"
            if (isWeekendOggi || isVacanzaOggi) {
                document.getElementById('label-top').innerText = "meritato riposo";
                document.getElementById('label-sub').innerText = "oggi niente scuola!";
                document.getElementById('motivational-quote').innerText = "ricarica le pile per lunedÃ¬. ðŸ”‹";
            } else {
                // Messaggi variabili per i giorni di scuola
                const messaggi = {
                    1: "buon lunedÃ¬, coraggio! â˜•",
                    5: "dai che oggi Ã¨ venerdÃ¬! ðŸ•",
                    default: "un passo alla volta. ðŸ¾"
                };
                document.getElementById('motivational-quote').innerText = messaggi[giornoSettimanaOggi] || messaggi.default;
            }

            // 3. Colore Dinamico
            const daysElem = document.getElementById('days-count');
            daysElem.innerText = giorniLavorativi;
            
            if (giorniLavorativi <= 15) daysElem.style.color = "#34C759"; // Verde
            else if (giorniLavorativi <= 40) daysElem.style.color = "#FF9500"; // Arancio
            else daysElem.style.color = "#007AFF"; // Blu

            // 4. Settimane
            const numSettimane = Math.floor(giorniLavorativi / 5);
            const giorniAvanzati = giorniLavorativi % 5;
            document.getElementById('weeks-info').innerHTML = `mancano circa: <strong>${numSettimane} settimane</strong> e ${giorniAvanzati} giorni`;
        }

        function mostraSchermataSpeciale(top, main, sub, quote, weeks) {
            document.getElementById('label-top').innerText = top;
            document.getElementById('days-count').innerText = main;
            document.getElementById('label-sub').innerText = sub;
            document.getElementById('motivational-quote').innerText = quote;
            document.getElementById('weeks-info').innerHTML = weeks;
        }

        calcola();
    </script>
</body>

</html>
